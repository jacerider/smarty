{"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;CAGC,GACD,wDAAwD;AAEvD,CAAA,SAAS,SAAQ,EAAE,OAAM,EAAE,eAAc,EAAE,KAAI;IAE9C,MAAM;QACJ,GAAG;QACH,KAAK;QAEL,YAAY,EAAE,CAAE;YACd,IAAI,CAAC,EAAE,GAAG;YAEV,IAAI,CAAC,IAAI,GAAG,UAAS,aAAa,CAAC;YACnC,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC;YACxB,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,GAAG;YAC1B,IAAI,CAAC,EAAE,CAAC,UAAU,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,EAAE,CAAC,WAAW;YAE9D,IAAI,CAAC,IAAI;QACX;QAEA,OAAO;YACL,MAAM,OAAO,IAAI;YACjB,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,SAAS,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC;gBACxD,KAAK,MAAM,CAAC,EAAE,MAAM,CAAC,KAAK;YAC5B;QACF;QAEA,SAAS,IAAI,EAAE,UAAU,GAAG,EAAE;YAC5B,IAAI;YACJ,OAAO,CAAC,GAAG;gBACT,aAAa;gBACb,QAAQ,WAAW;oBACjB,KAAK,KAAK,CAAC,IAAI,EAAE;gBACnB,GAAG;YACL;QACF;QAEA,MAAM,OAAO,WAAW,EAAE;YACxB,IAAI,CAAC,aACH;YAGF,QAAQ,GAAG,CAAC,YAAY,aAAa;YACrC;YAaA,eAAe,cAAc,MAAM,EAAE,UAAU;gBAC7C,IAAI;oBACF,MAAM,UAAU,MAAM,OAAO,IAAI,CAAC;oBAClC,QAAQ,GAAG,CAAC,WAAW;gBACzB,EAAE,OAAO,KAAK;oBACZ,QAAQ,GAAG,CAAC,SAAS;gBACvB;YACF;QACF;IACF;IAEA,QAAO,SAAS,CAAC,iBAAiB,GAAG;QACnC,QAAQ,SAAS,OAAO;YACtB,QAAQ,GAAG,CAAC;YACV,0FAA0F;YAC5F,MAAK,uBAAuB,wBAAwB,SAAS,OAAO,CAAC,SAAU,EAAE;gBAC/E,IAAI,OAAO;YACb;QACF;IACF;AAEF,CAAA,EAAG,UAAU,QAAQ,gBAAgB","sources":["src/js/smarty.address.js"],"sourcesContent":["/**\n * @file\n * Smarty autocomplete.\n */\n// import SmartySDK from 'smartystreets-javascript-sdk';\n\n(function(document, Drupal, drupalSettings, once) {\n\n  class Smarty {\n    el;\n    menu;\n\n    constructor(el) {\n      this.el = el;\n\n      this.menu = document.createElement('div');\n      this.menu.classList.add('smarty-autocomplete-menu');\n      this.menu.style.display = 'none';\n      this.el.parentNode.insertBefore(this.menu, this.el.nextSibling);\n\n      this.bind();\n    }\n\n    bind() {\n      const self = this;\n      this.el.addEventListener('keyup', this.debounce(function(e) {\n        self.lookup(e.target.value);\n      }));\n    }\n\n    debounce(func, timeout = 300) {\n      let timer;\n      return (...args)=>{\n        clearTimeout(timer);\n        timer = setTimeout(()=>{\n          func.apply(this, args);\n        }, timeout);\n      };\n    };\n\n    async lookup(lookupValue) {\n      if (!lookupValue) {\n        return;\n      }\n\n      console.log('debounce', lookupValue, autoComplete);\n      return;\n      const SmartySDK = require(\"smartystreets-javascript-sdk\");\n      const SmartyCore = SmartySDK.core;\n      const Lookup = SmartySDK.usAutocompletePro.Lookup;\n      const credentials = new SmartyCore.SharedCredentials(drupalSettings.smarty.key);\n      let clientBuilder = new SmartyCore.ClientBuilder(credentials).withLicenses([\n        \"us-autocomplete-pro-cloud\"\n      ]);\n      let client = clientBuilder.buildUsAutocompleteProClient();\n      let lookup = new Lookup(lookupValue);\n\n      await handleRequest(lookup, \"Simple Lookup\");\n\n      async function handleRequest(lookup, lookupType) {\n        try {\n          const results = await client.send(lookup);\n          console.log('results', results);\n        } catch (err) {\n          console.log('error', err);\n        }\n      }\n    }\n  }\n\n  Drupal.behaviors.smartyAutocomlete = {\n    attach: function(context) {\n      console.log('hit');\n        // once('smarty.autocomplete', '.smarty-autocomplete', context).forEach(initAutocomplete);\n      once(\"smarty.autocomplete\", \".smarty-autocomplete\", context).forEach(function (el) {\n        new Smarty(el);\n      });\n    }\n  };\n\n})(document, Drupal, drupalSettings, once);\n"],"names":[],"version":3,"file":"smarty.address.js.map","sourceRoot":"../"}